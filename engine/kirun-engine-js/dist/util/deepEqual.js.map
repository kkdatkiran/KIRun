{"version":3,"sources":["../../src/util/deepEqual.js"],"names":["Queue","head","undefined","tail","length","item","value","next","x","a","push","list","node","n","deepEqual","v1","v2","que","flag","o1","o2","deque","Array","isArray","len","keys1","Object","keys","keys2","i","dispose"],"mappings":"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","sourcesContent":["export class Queue {\n  constructor() {\n    this.head = undefined;\n    this.tail = undefined;\n    this.length = 0;\n  }\n\n  push(item) {\n    this.length++;\n    if (!this.head && !this.tail) {\n      this.head = this.tail = { value: item };\n      return;\n    }\n\n    this.tail.next = { value: item };\n    this.tail = this.tail.next;\n  }\n\n  deque() {\n    if (!this.length) return undefined;\n    this.length--;\n    const x = this.head.value;\n    this.head = this.head.next;\n    if (!this.head) this.tail = undefined;\n    return x;\n  }\n\n  head() {\n    return this.head;\n  }\n\n  tail() {\n    return this.tail;\n  }\n\n  list(x = this.head, a = []) {\n    if (!x) return a;\n    a.push(x.value);\n    if (x.next) this.list(x.next, a);\n    return a;\n  }\n\n  dispose() {\n    let node = this.head;\n    let n;\n    while (node) {\n      delete node.value;\n      n = node.next;\n      delete node.next;\n      node = n;\n    }\n    this.head = undefined;\n    this.tail = undefined;\n    this.length = 0;\n  }\n}\n\nexport function deepEqual(v1, v2) {\n  let que = new Queue();\n  que.push([v1, v2]);\n  let flag = true;\n  let o1, o2;\n\n  while (que.length && flag) {\n    [o1, o2] = que.deque();\n\n    if (typeof o1 !== typeof o2) {\n      flag = false;\n      break;\n    }\n\n    if (Array.isArray(o1)) {\n      if (!Array.isArray(o2)) {\n        flag = false;\n        break;\n      }\n\n      let len = o1.length;\n      if (len !== o2.length) {\n        flag = false;\n        break;\n      }\n\n      len = len - 1;\n      while (len >= 0) {\n        que.push([o1[len], o2[len]]);\n        len--;\n      }\n    } else if (typeof o1 === \"object\") {\n      if (typeof o2 !== \"object\") {\n        flag = false;\n        break;\n      }\n\n      let keys1 = Object.keys(o1);\n      let keys2 = Object.keys(o2);\n\n      if (keys1.length !== keys2.length) {\n        flag = false;\n        break;\n      }\n\n      let i = keys1.length - 1;\n      let keys = {};\n      while (i >= 0) {\n        keys[keys1[i]] = true;\n        i--;\n      }\n\n      i = keys1.length - 1;\n      while (i >= 0) {\n        if (!keys[keys2[i]]) {\n          flag = false;\n          break;\n        }\n        que.push([o1[keys2[i]], o2[keys2[i]]]);\n        i--;\n      }\n    } else {\n      flag = o1 === o2;\n    }\n  }\n  que.dispose();\n  return flag;\n}\n"],"file":"deepEqual.js"}